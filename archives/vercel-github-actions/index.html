<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>📔 Vercel の定期デプロイを GitHub Actions で実現する | Nikaeraintokyo.</title><meta name=keywords content="vercel,githubactions"><meta name=description content="はじめに 最近 catnose99 さんの チーム個々人のテックブログを RSS で集約するサイトを作った（Next.js） を利用させていただく形で 会社のテックブログ を構築しました。
https://tech.kadinche.com/
Team Blog Hub が Next.js で開発されているので、デプロイ先は Vercel に決めました。その際に記事を自動的に更新するために、GitHub Actions で定期的にビルドを回すようにしました。また、独自ドメインの設定も行いました。
本記事では、Vercel プロジェクトを GitHub Actions でビルドしてデプロイするための手順についてまとめていきます。またおまけとして、Vercel での独自ドメインの設定方法、及び弊社の Team Blog Hub の運用方針についても書いていきます。
なお、記事は下記の前提で書いておりますのでご注意くださいませ。
 Vercel でサインアップ済み  サインアップ済みでない方はこちらからサインアップ可能です   Vercel でプロジェクト作成済み  プロジェクト未作成の方はこちらから作成可能です   Vercel の GitHub 連携でプロジェクトへのリポジトリの紐付け済み  動作環境  Node.js v15.6.0 Vercel CLI 21.1.0  GitHub Actions で Vercel へデプロイする準備を行う まずは GitHub Actions で Vercel へのビルド & デプロイを行うための環境を整える必要があります。そのためには、各種必要となる情報を予め Vercel から取得しておく必要があります。"><meta name=author content="Me"><link rel=canonical href=https://zenn.dev/nikaera/articles/vercel-github-actions><link crossorigin=anonymous href=/assets/css/stylesheet.min.d0c0348c2d0cff14148d0e347258519d8df2ce53ce5ac32c7bd9a549182cb8ae.css integrity="sha256-0MA0jC0M/xQUjQ40clhRnY3yzlPOWsMse9mlSRgsuK4=" rel="preload stylesheet" as=style><link rel=preload href=/profile.jpg as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://nikaera.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nikaera.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://nikaera.com/favicon.ico><link rel=apple-touch-icon href=https://nikaera.com/apple-touch-icon.png><link rel=mask-icon href=https://nikaera.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.0"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-33707296-2','auto');ga('send','pageview');}</script><meta property="og:title" content="📔 Vercel の定期デプロイを GitHub Actions で実現する"><meta property="og:description" content="はじめに 最近 catnose99 さんの チーム個々人のテックブログを RSS で集約するサイトを作った（Next.js） を利用させていただく形で 会社のテックブログ を構築しました。
https://tech.kadinche.com/
Team Blog Hub が Next.js で開発されているので、デプロイ先は Vercel に決めました。その際に記事を自動的に更新するために、GitHub Actions で定期的にビルドを回すようにしました。また、独自ドメインの設定も行いました。
本記事では、Vercel プロジェクトを GitHub Actions でビルドしてデプロイするための手順についてまとめていきます。またおまけとして、Vercel での独自ドメインの設定方法、及び弊社の Team Blog Hub の運用方針についても書いていきます。
なお、記事は下記の前提で書いておりますのでご注意くださいませ。
 Vercel でサインアップ済み  サインアップ済みでない方はこちらからサインアップ可能です   Vercel でプロジェクト作成済み  プロジェクト未作成の方はこちらから作成可能です   Vercel の GitHub 連携でプロジェクトへのリポジトリの紐付け済み  動作環境  Node.js v15.6.0 Vercel CLI 21.1.0  GitHub Actions で Vercel へデプロイする準備を行う まずは GitHub Actions で Vercel へのビルド & デプロイを行うための環境を整える必要があります。そのためには、各種必要となる情報を予め Vercel から取得しておく必要があります。"><meta property="og:type" content="article"><meta property="og:url" content="https://nikaera.com/archives/vercel-github-actions/"><meta property="og:image" content="https://nikaera.com/cover_image.jpg"><meta property="article:section" content="archives"><meta property="article:published_time" content="2021-02-04T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-04T00:00:00+00:00"><meta property="og:site_name" content="Nikaeraintokyo."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nikaera.com/cover_image.jpg"><meta name=twitter:title content="📔 Vercel の定期デプロイを GitHub Actions で実現する"><meta name=twitter:description content="はじめに 最近 catnose99 さんの チーム個々人のテックブログを RSS で集約するサイトを作った（Next.js） を利用させていただく形で 会社のテックブログ を構築しました。
https://tech.kadinche.com/
Team Blog Hub が Next.js で開発されているので、デプロイ先は Vercel に決めました。その際に記事を自動的に更新するために、GitHub Actions で定期的にビルドを回すようにしました。また、独自ドメインの設定も行いました。
本記事では、Vercel プロジェクトを GitHub Actions でビルドしてデプロイするための手順についてまとめていきます。またおまけとして、Vercel での独自ドメインの設定方法、及び弊社の Team Blog Hub の運用方針についても書いていきます。
なお、記事は下記の前提で書いておりますのでご注意くださいませ。
 Vercel でサインアップ済み  サインアップ済みでない方はこちらからサインアップ可能です   Vercel でプロジェクト作成済み  プロジェクト未作成の方はこちらから作成可能です   Vercel の GitHub 連携でプロジェクトへのリポジトリの紐付け済み  動作環境  Node.js v15.6.0 Vercel CLI 21.1.0  GitHub Actions で Vercel へデプロイする準備を行う まずは GitHub Actions で Vercel へのビルド & デプロイを行うための環境を整える必要があります。そのためには、各種必要となる情報を予め Vercel から取得しておく必要があります。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Archives","item":"https://nikaera.com/archives/"},{"@type":"ListItem","position":2,"name":"📔 Vercel の定期デプロイを GitHub Actions で実現する","item":"https://nikaera.com/archives/vercel-github-actions/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"📔 Vercel の定期デプロイを GitHub Actions で実現する","name":"📔 Vercel の定期デプロイを GitHub Actions で実現する","description":"はじめに 最近 catnose99 さんの チーム個々人のテックブログを RSS で集約するサイトを作った（Next.js） を利用させていただく形で 会社のテックブログ を構築しました。\nhttps://tech.kadinche.com/\nTeam Blog Hub が Next.js で開発されているので、デプロイ先は Vercel に決めました。その際に記事を自動的に更新するために、GitHub Actions で定期的にビルドを回すようにしました。また、独自ドメインの設定も行いました。\n本記事では、Vercel プロジェクトを GitHub Actions でビルドしてデプロイするための手順についてまとめていきます。またおまけとして、Vercel での独自ドメインの設定方法、及び弊社の Team Blog Hub の運用方針についても書いていきます。\nなお、記事は下記の前提で書いておりますのでご注意くださいませ。\n Vercel でサインアップ済み  サインアップ済みでない方はこちらからサインアップ可能です   Vercel でプロジェクト作成済み  プロジェクト未作成の方はこちらから作成可能です   Vercel の GitHub 連携でプロジェクトへのリポジトリの紐付け済み  動作環境  Node.js v15.6.0 Vercel CLI 21.1.0  GitHub Actions で Vercel へデプロイする準備を行う まずは GitHub Actions で Vercel へのビルド \u0026amp; デプロイを行うための環境を整える必要があります。そのためには、各種必要となる情報を予め Vercel から取得しておく必要があります。","keywords":["vercel","githubactions"],"articleBody":"はじめに 最近 catnose99 さんの チーム個々人のテックブログを RSS で集約するサイトを作った（Next.js） を利用させていただく形で 会社のテックブログ を構築しました。\nhttps://tech.kadinche.com/\nTeam Blog Hub が Next.js で開発されているので、デプロイ先は Vercel に決めました。その際に記事を自動的に更新するために、GitHub Actions で定期的にビルドを回すようにしました。また、独自ドメインの設定も行いました。\n本記事では、Vercel プロジェクトを GitHub Actions でビルドしてデプロイするための手順についてまとめていきます。またおまけとして、Vercel での独自ドメインの設定方法、及び弊社の Team Blog Hub の運用方針についても書いていきます。\nなお、記事は下記の前提で書いておりますのでご注意くださいませ。\n Vercel でサインアップ済み  サインアップ済みでない方はこちらからサインアップ可能です   Vercel でプロジェクト作成済み  プロジェクト未作成の方はこちらから作成可能です   Vercel の GitHub 連携でプロジェクトへのリポジトリの紐付け済み  動作環境  Node.js v15.6.0 Vercel CLI 21.1.0  GitHub Actions で Vercel へデプロイする準備を行う まずは GitHub Actions で Vercel へのビルド \u0026 デプロイを行うための環境を整える必要があります。そのためには、各種必要となる情報を予め Vercel から取得しておく必要があります。\nVercel デプロイ時に必要となるトークンを取得する Vercel にログイン後、トップページ右上のアイコンからトークンを発行画面に遷移します。\nトップページ右上のアイコンから Settings メニューをクリックする\nトークンを発行して、その内容を控える (GitHub Actions での Vercel デプロイ時に必要となる)\n発行したトークンは GitHub Actions でのデプロイ時に利用します。\nVercel デプロイ時に必要となる情報を取得する Verce には公式が提供している CLI が存在するので、まずはそちらをインストールします。 インストールコマンドは下記になります。\n# npm の場合 npm i -g vercel # yarn の場合 yarn global add vercel その後、Vercel プロジェクトに紐付けた GitHub リポジトリのルートで vercel コマンドを実行して、手順に従って Vercel プロジェクトとの紐付けを行います。コマンドの実行に成功すると .vercel/project.json というファイルの生成が確認できるはずです。\n.vercel/project.json には GitHub Actions 経由でのデプロイ時に必要となる vercel-project-id と vercel-org-id の内容が記載されています。\n{ \"projectId\": \"\", \"orgId\": \"\" } 上記の内容を GitHub リポジトリの Secrets に登録していきます。\nGitHub Actions で定期的に Vercel へデプロイする GitHub リポジトリの Secrets に .vercel/project.json の内容を登録します。今回は ORG_ID PROJECT_ID VERCEL_TOKEN を Secrets に登録します。\n   キー 値     ORG_ID .vercel/project.json の orgId   PROJECT_ID .vercel/project.json の projectId   VERCEL_TOKEN Vercel で発行したトークン    GitHub Actions 経由で Vercel へデプロイするのに必要な値を Secrets に登録しておく\nシークレットへ必要な情報が登録できたら、GitHub Actions のワークフローファイルを作成します。今回は有志で開発されている Vercel Action を利用します。\n# deploy_website.yml name: deploy website on: # 一応動確のために手動で GitHub Actions を実行可能にする # その際の引数として checkout 時の ref を渡している # default 部分はリポジトリに設定されているデフォルトブランチを指定する workflow_dispatch: inputs: ref: description: branch|tag|SHA to checkout default: \"main\" required: true # 毎日日本時間の 11時 に GitHub Actions が実行される (cron の時刻は UST) # 実行の際に参照されるブランチは上記の default で指定したものが使用される schedule: - cron: \"0 2 * * *\" jobs: deploy: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 with: ref: ${{ github.event.inputs.ref }} - uses: actions/setup-node@v2 with: node-version: \"15\" # 投稿内容を更新するために npm run build:posts を走らせる - name: Recreate all posts shell: bash run: |npm install npm run build:posts - uses: amondnet/vercel-action@v20 with: # GitHub Actions の Secrets で作成した値を参照する形で # Vercel デプロイ時に必要となる各種パラメタを設定する vercel-token: ${{ secrets.VERCEL_TOKEN }} # Required vercel-args: \"--prod\" # Optional vercel-org-id: ${{ secrets.ORG_ID}} #Required vercel-project-id: ${{ secrets.PROJECT_ID}} #Required working-directory: ./ 上記ファイルを作成次第、GitHub リポジトリのデフォルトブランチにコミットして、GitHub Actions のワークフローを手動実行してみて正常にデプロイできそうか確認していきます。\nGitHub リポジトリのページに遷移後、実際に GitHub Actions のワークフローを実行してみる\nGitHub Actions のワークフローが実行されていそうか確認する\nGitHub Actions のワークフローが正常に実行完了していることを確認する\nGitHub Actions が正常に実行されていそうなことが確認できたら、Vercel 側で正常にデプロイが完了していそうかを確認します。Vercel のトップページに遷移後、該当するプロジェクトページに遷移して、 Deployments タブからデプロイ履歴を確認します。\nVercel で該当するプロジェクトページに遷移して、デプロイ履歴を確認する\nこれで一通りの作業は終了です。お疲れさまでした。\n(おまけ) 独自ドメインを紐付ける Vercel には Custom Domains という独自ドメインを紐付けるための機能が備わっています。こちらを利用すると独自ドメイン経由で Vercel プロジェクトにアクセスさせることが可能になります。\nルートドメインの場合は A レコードを、サブドメインの場合は CNAME レコードを独自ドメインの DNS レコード設定に追加するだけで、独自ドメイン経由で HTTPS アクセス可能になります。\nCustom Domains を設定して独自ドメイン経由でアクセスできるようにする (サブドメイン設定時の場合の設定方法)\nCustom Domains の状態が Valid Configuration になり次第、設定した独自ドメインへアクセスしたときに Vercel デプロイしたページが表示されるか確認する。\n(おまけ) Team Blog Hub の実際の運用 社内で話し合った結果、master ブランチはオリジナルリポジトリの最新内容を反映する場所として、release ブランチは実際のデプロイに利用するブランチとして運用することにしました。\nmaster ブランチと分離して、自分たちの会社の独自改修については release ブランチに取り込むことで、本家リポジトリに PR が出しやすいという利点があります。また、自分たちのペースで本家リポジトリの最新の master ブランチの取り込み作業ができるという利点もあります。\nブランチを分離しておくだけで、最新の本家リポジトリの新機能の取り込みが楽になる恩恵が受けられるようになり、かつ自社の独自改修の内容についても安心して release ブランチへコミットできるようになるためオススメです。\nおわりに Team Blog Hub を用いることで、簡単にカッコいいデザインで会社のテックブログを構築できました。OSS として公開してくださっている catnose さんには本当に感謝です 🙏🏻\n無理なく継続更新され続ける自社テックブログとして、ありがたく Team Blog Hug を活用させていただきつつ、PR チャンスがあれば積極的に狙っていきたいと考えています 🔫\n参考リンク  catnose99/team-blog-hub: RSS based blog starter kit for teams Introduction to Vercel - Vercel Documentation Vercel Action · Actions · GitHub Marketplace  ","wordCount":"412","inLanguage":"ja","datePublished":"2021-02-04T00:00:00Z","dateModified":"2021-02-04T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nikaera.com/archives/vercel-github-actions/"},"publisher":{"@type":"Organization","name":"Nikaeraintokyo.","logo":{"@type":"ImageObject","url":"https://nikaera.com/favicon.ico"}}}</script></head><body class=dark id=top><script>if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://nikaera.com/ accesskey=h title="Nikaeraintokyo. (Alt + H)">Nikaeraintokyo.</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://music.nikaera.com/ title="Music 🎵" target=_blank rel="noopener noreferrer"><span>Music 🎵</span></a></li><li><span>|</span></li><li><a href=https://nikaera.com/archives/ title="Archives 🗄️"><span>Archives 🗄️</span></a></li><li><a href=https://nikaera.com/rss_feeds/ title="RSS Feeds 🔖"><span>RSS Feeds 🔖</span></a></li><li><a href=https://nikaera.com/profile/ title="Profile 👦"><span>Profile 👦</span></a></li><li><a href=https://nikaera.com/portfolio/ title="Portfolio 💼"><span>Portfolio 💼</span></a></li><li><a href=https://nikaera.com/contact/ title="Contact 📥"><span>Contact 📥</span></a></li><li><a href=https://nikaera.com/search/ title="Search 🔍"><span>Search 🔍</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>📔 Vercel の定期デプロイを GitHub Actions で実現する</h1><div class=post-meta>February 4, 2021&nbsp;·&nbsp;2 分&nbsp;·&nbsp;Me</div></header><div class=post-content><h1 id=はじめに>はじめに<a hidden class=anchor aria-hidden=true href=#はじめに>#</a></h1><p>最近 <a href=https://zenn.dev/catnose99>catnose99</a> さんの <a href=https://zenn.dev/catnose99/articles/cb72a73368a547756862>チーム個々人のテックブログを RSS で集約するサイトを作った（Next.js）</a> を利用させていただく形で <a href=https://tech.kadinche.com/>会社のテックブログ</a> を構築しました。</p><p><a href=https://tech.kadinche.com/>https://tech.kadinche.com/</a></p><p><a href=https://github.com/catnose99/team-blog-hub>Team Blog Hub</a> が <a href=https://nextjs.org/>Next.js</a> で開発されているので、デプロイ先は <a href=https://vercel.com/>Vercel</a> に決めました。その際に記事を自動的に更新するために、<a href=https://github.co.jp/features/actions>GitHub Actions</a> で定期的にビルドを回すようにしました。また、独自ドメインの設定も行いました。</p><p><strong>本記事では、Vercel プロジェクトを GitHub Actions でビルドしてデプロイするための手順についてまとめていきます。またおまけとして、Vercel での独自ドメインの設定方法、及び弊社の Team Blog Hub の運用方針についても書いていきます。</strong></p><p>なお、<strong>記事は下記の前提で書いておりますのでご注意くださいませ。</strong></p><ul><li>Vercel でサインアップ済み<ul><li>サインアップ済みでない方は<a href=https://vercel.com/signup>こちら</a>からサインアップ可能です</li></ul></li><li>Vercel でプロジェクト作成済み<ul><li>プロジェクト未作成の方は<a href=https://vercel.com/docs/platform/projects>こちら</a>から作成可能です</li></ul></li><li><a href=https://vercel.com/docs/git#deploying-a-git-repository>Vercel の GitHub 連携</a>でプロジェクトへのリポジトリの紐付け済み</li></ul><h1 id=動作環境>動作環境<a hidden class=anchor aria-hidden=true href=#動作環境>#</a></h1><ul><li>Node.js v15.6.0</li><li>Vercel CLI 21.1.0</li></ul><h1 id=github-actions-で-vercel-へデプロイする準備を行う>GitHub Actions で Vercel へデプロイする準備を行う<a hidden class=anchor aria-hidden=true href=#github-actions-で-vercel-へデプロイする準備を行う>#</a></h1><p>まずは GitHub Actions で Vercel へのビルド & デプロイを行うための環境を整える必要があります。そのためには、<strong>各種必要となる情報を予め Vercel から取得しておく必要があります。</strong></p><h2 id=vercel-デプロイ時に必要となるトークンを取得する>Vercel デプロイ時に必要となるトークンを取得する<a hidden class=anchor aria-hidden=true href=#vercel-デプロイ時に必要となるトークンを取得する>#</a></h2><p>Vercel にログイン後、トップページ右上のアイコンからトークンを発行画面に遷移します。</p><p><img loading=lazy src=https://i.gyazo.com/b5b135d2b441d810f516d12a4523f7f8.png alt="スクリーンショット 2021-01-27 5.14.38.png">
<strong>トップページ右上のアイコンから Settings メニューをクリックする</strong></p><p><img loading=lazy src=https://i.gyazo.com/a5817e0dd7afb924534f15cd955087e4.png alt="スクリーンショット 2021-01-27 5.17.27.png">
<strong>トークンを発行して、その内容を控える (GitHub Actions での Vercel デプロイ時に必要となる)</strong></p><p>発行したトークンは GitHub Actions でのデプロイ時に利用します。</p><h2 id=vercel-デプロイ時に必要となる情報を取得する>Vercel デプロイ時に必要となる情報を取得する<a hidden class=anchor aria-hidden=true href=#vercel-デプロイ時に必要となる情報を取得する>#</a></h2><p>Verce には<a href=https://vercel.com/download>公式が提供している CLI</a> が存在するので、まずはそちらをインストールします。
インストールコマンドは下記になります。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># npm の場合</span>
npm i -g vercel

<span style=color:#75715e># yarn の場合</span>
yarn global add vercel
</code></pre></div><p>その後、Vercel プロジェクトに紐付けた GitHub リポジトリのルートで <code>vercel</code> コマンドを実行して、手順に従って Vercel プロジェクトとの紐付けを行います。コマンドの実行に成功すると <code>.vercel/project.json</code> というファイルの生成が確認できるはずです。</p><p><strong><code>.vercel/project.json</code> には GitHub Actions 経由でのデプロイ時に必要となる <a href=https://github.com/amondnet/vercel-action#inputs>vercel-project-id と vercel-org-id</a> の内容が記載されています。</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{ <span style=color:#f92672>&#34;projectId&#34;</span>: <span style=color:#e6db74>&#34;&lt;vercel-project-id の内容&gt;&#34;</span>, <span style=color:#f92672>&#34;orgId&#34;</span>: <span style=color:#e6db74>&#34;&lt;vercel-org-id の内容&gt;&#34;</span> }
</code></pre></div><p>上記の内容を GitHub リポジトリの <a href=https://docs.github.com/ja/actions/reference/encrypted-secrets#creating-encrypted-secrets-for-a-repository>Secrets</a> に登録していきます。</p><h1 id=github-actions-で定期的に-vercel-へデプロイする>GitHub Actions で定期的に Vercel へデプロイする<a hidden class=anchor aria-hidden=true href=#github-actions-で定期的に-vercel-へデプロイする>#</a></h1><p>GitHub リポジトリの Secrets に <code>.vercel/project.json</code> の内容を登録します。今回は <code>ORG_ID</code> <code>PROJECT_ID</code> <code>VERCEL_TOKEN</code> を Secrets に登録します。</p><table><thead><tr><th>キー</th><th>値</th></tr></thead><tbody><tr><td>ORG_ID</td><td><code>.vercel/project.json</code> の <code>orgId</code></td></tr><tr><td>PROJECT_ID</td><td><code>.vercel/project.json</code> の <code>projectId</code></td></tr><tr><td>VERCEL_TOKEN</td><td>Vercel で発行したトークン</td></tr></tbody></table><p><img loading=lazy src=https://i.gyazo.com/f630e51d4c02f1ec0362712ef2cd630c.png alt="スクリーンショット 2021-01-27 5.23.06.png">
<strong>GitHub Actions 経由で Vercel へデプロイするのに必要な値を Secrets に登録しておく</strong></p><p>シークレットへ必要な情報が登録できたら、GitHub Actions のワークフローファイルを作成します。<strong>今回は有志で開発されている <a href=https://github.com/marketplace/actions/vercel-action>Vercel Action</a> を利用します。</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#75715e># deploy_website.yml</span>

<span style=color:#f92672>name</span>: <span style=color:#ae81ff>deploy website</span>
<span style=color:#f92672>on</span>:
  <span style=color:#75715e># 一応動確のために手動で GitHub Actions を実行可能にする</span>
  <span style=color:#75715e># その際の引数として checkout 時の ref を渡している</span>
  <span style=color:#75715e># default 部分はリポジトリに設定されているデフォルトブランチを指定する</span>
  <span style=color:#f92672>workflow_dispatch</span>:
    <span style=color:#f92672>inputs</span>:
      <span style=color:#f92672>ref</span>:
        <span style=color:#f92672>description</span>: <span style=color:#ae81ff>branch|tag|SHA to checkout</span>
        <span style=color:#f92672>default</span>: <span style=color:#e6db74>&#34;main&#34;</span>
        <span style=color:#f92672>required</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#75715e># 毎日日本時間の 11時 に GitHub Actions が実行される (cron の時刻は UST)</span>
  <span style=color:#75715e># 実行の際に参照されるブランチは上記の default で指定したものが使用される</span>
  <span style=color:#f92672>schedule</span>:
    - <span style=color:#f92672>cron</span>: <span style=color:#e6db74>&#34;0 2 * * *&#34;</span>
<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>ref</span>: <span style=color:#ae81ff>${{ github.event.inputs.ref }}</span>
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-node@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>node-version</span>: <span style=color:#e6db74>&#34;15&#34;</span>
      <span style=color:#75715e># 投稿内容を更新するために npm run build:posts を走らせる</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Recreate all posts</span>
        <span style=color:#f92672>shell</span>: <span style=color:#ae81ff>bash</span>
        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span><span style=color:#e6db74>          npm install
</span><span style=color:#e6db74>          npm run build:posts</span>          
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>amondnet/vercel-action@v20</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#75715e># GitHub Actions の Secrets で作成した値を参照する形で</span>
          <span style=color:#75715e># Vercel デプロイ時に必要となる各種パラメタを設定する</span>
          <span style=color:#f92672>vercel-token</span>: <span style=color:#ae81ff>${{ secrets.VERCEL_TOKEN }}</span> <span style=color:#75715e># Required</span>
          <span style=color:#f92672>vercel-args</span>: <span style=color:#e6db74>&#34;--prod&#34;</span> <span style=color:#75715e># Optional</span>
          <span style=color:#f92672>vercel-org-id</span>: <span style=color:#ae81ff>${{ secrets.ORG_ID}}</span> <span style=color:#75715e>#Required</span>
          <span style=color:#f92672>vercel-project-id</span>: <span style=color:#ae81ff>${{ secrets.PROJECT_ID}}</span> <span style=color:#75715e>#Required</span>
          <span style=color:#f92672>working-directory</span>: <span style=color:#ae81ff>./</span>
</code></pre></div><p>上記ファイルを作成次第、GitHub リポジトリのデフォルトブランチにコミットして、GitHub Actions のワークフローを手動実行してみて正常にデプロイできそうか確認していきます。</p><p><img loading=lazy src=https://i.gyazo.com/ce6d4ef418f097e0254a0554d0692b0f.png alt="スクリーンショット 2021-01-27 5.46.23.png">
<strong>GitHub リポジトリのページに遷移後、実際に GitHub Actions のワークフローを実行してみる</strong></p><p><img loading=lazy src=https://i.gyazo.com/87647579244d9f2e5448d7c9de337499.png alt="スクリーンショット 2021-01-27 6.00.48.png">
<strong>GitHub Actions のワークフローが実行されていそうか確認する</strong></p><p><img loading=lazy src=https://i.gyazo.com/8001e72df8b0cd733a75cb419efaef2c.png alt="スクリーンショット 2021-01-27 6.04.43.png">
<strong>GitHub Actions のワークフローが正常に実行完了していることを確認する</strong></p><p>GitHub Actions が正常に実行されていそうなことが確認できたら、Vercel 側で正常にデプロイが完了していそうかを確認します。<strong>Vercel のトップページに遷移後、該当するプロジェクトページに遷移して、 <code>Deployments</code> タブからデプロイ履歴を確認します。</strong></p><p><img loading=lazy src=https://i.gyazo.com/c87b2faa3d1d7e0a06f056a218849ac8.png alt="スクリーンショット 2021-01-27 6.09.55.png">
<strong>Vercel で該当するプロジェクトページに遷移して、デプロイ履歴を確認する</strong></p><p>これで一通りの作業は終了です。お疲れさまでした。</p><h1 id=おまけ-独自ドメインを紐付ける>(おまけ) 独自ドメインを紐付ける<a hidden class=anchor aria-hidden=true href=#おまけ-独自ドメインを紐付ける>#</a></h1><p>Vercel には <a href=https://vercel.com/docs/custom-domains>Custom Domains</a> という独自ドメインを紐付けるための機能が備わっています。こちらを利用すると独自ドメイン経由で Vercel プロジェクトにアクセスさせることが可能になります。</p><p><a href=https://vercel.com/docs/custom-domains#step-4:-configuring-the-domain>ルートドメインの場合は A レコードを、サブドメインの場合は CNAME レコード</a>を独自ドメインの DNS レコード設定に追加するだけで、独自ドメイン経由で HTTPS アクセス可能になります。</p><p><img loading=lazy src=https://i.gyazo.com/e91580925ee7550102f986e3947d7f16.png alt="スクリーンショット 2021-01-27 6.20.50.png">
<strong>Custom Domains を設定して独自ドメイン経由でアクセスできるようにする (サブドメイン設定時の場合の設定方法)</strong></p><p>Custom Domains の状態が <code>Valid Configuration</code> になり次第、設定した独自ドメインへアクセスしたときに Vercel デプロイしたページが表示されるか確認する。</p><h1 id=おまけ-team-blog-hub-の実際の運用>(おまけ) Team Blog Hub の実際の運用<a hidden class=anchor aria-hidden=true href=#おまけ-team-blog-hub-の実際の運用>#</a></h1><p>社内で話し合った結果、<strong><code>master</code> ブランチはオリジナルリポジトリの最新内容を反映する場所として、<code>release</code> ブランチは実際のデプロイに利用するブランチとして運用することにしました。</strong></p><p><code>master</code> ブランチと分離して、自分たちの会社の独自改修については <code>release</code> ブランチに取り込むことで、本家リポジトリに PR が出しやすいという利点があります。また、自分たちのペースで本家リポジトリの最新の <code>master</code> ブランチの取り込み作業ができるという利点もあります。</p><p>ブランチを分離しておくだけで、<strong>最新の本家リポジトリの新機能の取り込みが楽になる恩恵が受けられるようになり、かつ自社の独自改修の内容についても安心して <code>release</code> ブランチへコミットできるようになるためオススメです。</strong></p><h1 id=おわりに>おわりに<a hidden class=anchor aria-hidden=true href=#おわりに>#</a></h1><p><a href=https://github.com/catnose99/team-blog-hub>Team Blog Hub</a> を用いることで、簡単にカッコいいデザインで会社のテックブログを構築できました。OSS として公開してくださっている <a href=https://zenn.dev/catnose99>catnose</a> さんには本当に感謝です 🙏🏻</p><p>無理なく継続更新され続ける自社テックブログとして、ありがたく Team Blog Hug を活用させていただきつつ、PR チャンスがあれば積極的に狙っていきたいと考えています 🔫</p><h1 id=参考リンク>参考リンク<a hidden class=anchor aria-hidden=true href=#参考リンク>#</a></h1><ul><li><a href=https://github.com/catnose99/team-blog-hub>catnose99/team-blog-hub: RSS based blog starter kit for teams</a></li><li><a href=https://vercel.com/docs>Introduction to Vercel - Vercel Documentation</a></li><li><a href=https://github.com/marketplace/actions/vercel-action>Vercel Action · Actions · GitHub Marketplace</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://nikaera.com/tags/vercel/>vercel</a></li><li><a href=https://nikaera.com/tags/githubactions/>githubactions</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 📔 Vercel の定期デプロイを GitHub Actions で実現する on twitter" href="https://twitter.com/intent/tweet/?text=%f0%9f%93%94%20Vercel%20%e3%81%ae%e5%ae%9a%e6%9c%9f%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%20GitHub%20Actions%20%e3%81%a7%e5%ae%9f%e7%8f%be%e3%81%99%e3%82%8b&url=https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f&hashtags=vercel%2cgithubactions"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 📔 Vercel の定期デプロイを GitHub Actions で実現する on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f&title=%f0%9f%93%94%20Vercel%20%e3%81%ae%e5%ae%9a%e6%9c%9f%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%20GitHub%20Actions%20%e3%81%a7%e5%ae%9f%e7%8f%be%e3%81%99%e3%82%8b&summary=%f0%9f%93%94%20Vercel%20%e3%81%ae%e5%ae%9a%e6%9c%9f%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%20GitHub%20Actions%20%e3%81%a7%e5%ae%9f%e7%8f%be%e3%81%99%e3%82%8b&source=https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 📔 Vercel の定期デプロイを GitHub Actions で実現する on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f&title=%f0%9f%93%94%20Vercel%20%e3%81%ae%e5%ae%9a%e6%9c%9f%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%20GitHub%20Actions%20%e3%81%a7%e5%ae%9f%e7%8f%be%e3%81%99%e3%82%8b"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zm-119.474 108.193c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zm-160.386-29.702c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 📔 Vercel の定期デプロイを GitHub Actions で実現する on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 📔 Vercel の定期デプロイを GitHub Actions で実現する on whatsapp" href="https://api.whatsapp.com/send?text=%f0%9f%93%94%20Vercel%20%e3%81%ae%e5%ae%9a%e6%9c%9f%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%20GitHub%20Actions%20%e3%81%a7%e5%ae%9f%e7%8f%be%e3%81%99%e3%82%8b%20-%20https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23-13.314-11.876-22.304-26.542-24.916-31.026s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 📔 Vercel の定期デプロイを GitHub Actions で実現する on telegram" href="https://telegram.me/share/url?text=%f0%9f%93%94%20Vercel%20%e3%81%ae%e5%ae%9a%e6%9c%9f%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%20GitHub%20Actions%20%e3%81%a7%e5%ae%9f%e7%8f%be%e3%81%99%e3%82%8b&url=https%3a%2f%2fnikaera.com%2farchives%2fvercel-github-actions%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47A3.38 3.38.0 0126.49 29.86zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://nikaera.com/>Nikaeraintokyo.</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu')
menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script></body></html>