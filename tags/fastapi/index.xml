<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>fastapi on Nikaeraintokyo.</title>
    <link>https://nikaera.com/tags/fastapi/</link>
    <description>Recent content in fastapi on Nikaeraintokyo.</description>
    <image>
      <url>https://nikaera.com/cover_image.jpg</url>
      <link>https://nikaera.com/cover_image.jpg</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <lastBuildDate>Thu, 24 Jun 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://nikaera.com/tags/fastapi/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ğŸ“ pytest ã§ alembic ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†æ–¹æ³•</title>
      <link>https://nikaera.com/archives/pytest-sqlalchemy-alembic/</link>
      <pubDate>Thu, 24 Jun 2021 00:00:00 +0000</pubDate>
      
      <guid>https://nikaera.com/archives/pytest-sqlalchemy-alembic/</guid>
      <description>ã¯ã˜ã‚ã« FastAPI ã¨ SQLAlchemy ã‚’åˆ©ç”¨ã—ã¦ Web API é–‹ç™ºã‚’è¡Œã£ã¦ã„ãŸéš›ã€SQLAlchemy ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ alembic ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚
ãŸã  E2E ãƒ†ã‚¹ãƒˆã‚’æ›¸ã“ã†ã¨ã—ãŸéš›ã«ã€pytest å®Ÿè¡Œä¸­ã« alembic ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†æ–¹æ³•ãŒåˆ†ã‹ã‚‰ãšæ¨¡ç´¢ã—ã¦ã„ã¾ã—ãŸã€‚çµæœçš„ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚„ã‚Šæ–¹ã¯åˆ†ã‹ã£ãŸã‚‚ã®ã®ä¸€å¿œä»Šå¾Œã‚‚åˆ©ç”¨ã™ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŸã‚ã€ãã®å†…å®¹ã‚’è¨˜äº‹ã¨ã—ã¦æ®‹ã—ã¦ãŠãã“ã¨ã«ã—ã¾ã—ãŸã€‚
æœ¬è¨˜äº‹å†…ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å«ã‚€ FastAPI ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ GitHub ãƒªãƒã‚¸ãƒˆãƒªä¸Šã«ã‚¢ãƒƒãƒ—ã—ã¦ãŠã„ãŸã®ã§ã€è©³ç´°ã‚’ç¢ºèªã•ã‚ŒãŸã„æ–¹ãŒã„ã‚Œã°ã”å‚ç…§ãã ã•ã„ã¾ã›ã€‚
alembic ã§ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã† conftest.py ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã§åˆ©ç”¨ã™ã‚‹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã® fixture ã‚’å®šç¾©ã™ã‚Œã° OK ã§ã™ã€‚
# conftest.py import os import alembic.config import pytest from sqlalchemy import create_engine from sqlalchemy.ext.declarative import declarative_base from sqlalchemy.orm import sessionmaker from sqlalchemy_utils import database_exists, create_database, drop_database # ãƒ†ã‚¹ãƒˆç”¨ã®åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ãŸ module ã‚’ import ã™ã‚‹ (å¿…è¦ãŒã‚ã‚Œã°) # from .seed import users, contents # æŒ‡å®šã—ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ alembic ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã† # å¼•æ•°ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã¯å…¨ã¦ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ def migrate(migrations_path, alembic_ini_path=&amp;#39;alembic.</description>
    </item>
    
  </channel>
</rss>
